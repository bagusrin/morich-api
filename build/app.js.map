{"version":3,"sources":["../src/app.js"],"names":["express","require","logger","bodyParser","admin","user","auth","member","video","videoadmin","general","chat","connection","jsonwebtoken","cors","moment","tz","format","app","publicDir","join","__dirname","init","use","json","urlencoded","extended","req","res","next","headers","authorization","split","verify","err","decode","undefined","configure","static","options","module","exports"],"mappings":"AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;;AAEA,IAAIC,SAASD,QAAQ,QAAR,CAAb;AACA,IAAIE,aAAaF,QAAQ,aAAR,CAAjB;AACA,IAAIG,QAAQH,QAAQ,wBAAR,CAAZ;AACA,IAAII,OAAOJ,QAAQ,mBAAR,CAAX;AACA,IAAIK,OAAOL,QAAQ,mBAAR,CAAX;AACA,IAAIM,SAASN,QAAQ,qBAAR,CAAb;AACA,IAAIO,QAAQP,QAAQ,oBAAR,CAAZ;AACA,IAAIQ,aAAaR,QAAQ,yBAAR,CAAjB;AACA,IAAIS,UAAUT,QAAQ,sBAAR,CAAd;AACA,IAAIU,OAAOV,QAAQ,mBAAR,CAAX;AACA,IAAIW,aAAaX,QAAQ,cAAR,CAAjB;AACA,IAAIY,eAAeZ,QAAQ,cAAR,CAAnB;AACA,IAAIa,OAAOb,QAAQ,MAAR,CAAX;AACA,IAAIc,SAASd,QAAQ,iBAAR,CAAb;;AAEAc,SAASC,EAAT,CAAY,cAAZ,EAA4BC,MAA5B;;AAEA,IAAIC,MAAMlB,SAAV;;AAEA,IAAImB,YAAYlB,QAAQ,MAAR,EAAgBmB,IAAhB,CAAqBC,SAArB,EAA+B,YAA/B,CAAhB;;AAEAT,WAAWU,IAAX;;AAEAJ,IAAIK,GAAJ,CAAQrB,OAAO,KAAP,CAAR;AACAgB,IAAIK,GAAJ,CAAQT,MAAR;AACAI,IAAIK,GAAJ,CAAQpB,WAAWqB,IAAX,EAAR;AACAN,IAAIK,GAAJ,CAAQpB,WAAWsB,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAtB,CAAR;;AAEAR,IAAIK,GAAJ,CAAQ,UAASI,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAChC,MAAGF,IAAIG,OAAJ,IAAeH,IAAIG,OAAJ,CAAYC,aAA3B,IAA4CJ,IAAIG,OAAJ,CAAYC,aAAZ,CAA0BC,KAA1B,CAAgC,GAAhC,EAAqC,CAArC,MAA4C,KAA3F,EAAkG;AAC/FnB,iBAAaoB,MAAb,CAAoBN,IAAIG,OAAJ,CAAYC,aAAZ,CAA0BC,KAA1B,CAAgC,GAAhC,EAAqC,CAArC,CAApB,EAA6D,aAA7D,EAA4E,UAASE,GAAT,EAAcC,MAAd,EAAsB;;AAEhG,UAAID,GAAJ,EACCP,IAAItB,IAAJ,GAAW+B,SAAX;;AAECT,UAAItB,IAAJ,GAAW8B,MAAX;AACAN;AACF,KAPF;AASA,GAVH,MAUO;AACHF,QAAItB,IAAJ,GAAW+B,SAAX;AACAP;AACD;AACH,CAfD;;AAiBAzB,MAAMiC,SAAN,CAAgBnB,GAAhB;AACAb,KAAKgC,SAAL,CAAenB,GAAf;AACAZ,KAAK+B,SAAL,CAAenB,GAAf;AACAX,OAAO8B,SAAP,CAAiBnB,GAAjB;AACAV,MAAM6B,SAAN,CAAgBnB,GAAhB;AACAT,WAAW4B,SAAX,CAAqBnB,GAArB;AACAR,QAAQ2B,SAAR,CAAkBnB,GAAlB;AACAP,KAAK0B,SAAL,CAAenB,GAAf;;AAEAA,IAAIK,GAAJ,CAAQvB,QAAQsC,MAAR,CAAenB,SAAf,CAAR;;AAEAD,IAAIqB,OAAJ,CAAY,GAAZ,EAAiBzB,MAAjB;;AAKA0B,OAAOC,OAAP,GAAiBvB,GAAjB","file":"app.js","sourcesContent":["var express = require('express');\n\nvar logger = require('morgan');\nvar bodyParser = require('body-parser');\nvar admin = require('./app/routes/spiderman');\nvar user = require('./app/routes/user');\nvar auth = require('./app/routes/auth');\nvar member = require('./app/routes/member');\nvar video = require('./app/routes/video');\nvar videoadmin = require('./app/routes/videoadmin');\nvar general = require('./app/routes/general');\nvar chat = require('./app/routes/chat');\nvar connection = require('../config/db');\nvar jsonwebtoken = require(\"jsonwebtoken\");\nvar cors = require(\"cors\");\nvar moment = require('moment-timezone');\n\nmoment().tz(\"Asia/Jakarta\").format();\n\nvar app = express();\n\nvar publicDir = require('path').join(__dirname,'/../public');\n\nconnection.init();\n\napp.use(logger('dev'));\napp.use(cors());\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\n\napp.use(function(req, res, next) {\n\tif(req.headers && req.headers.authorization && req.headers.authorization.split(' ')[0] === 'JWT') {\n  \t\tjsonwebtoken.verify(req.headers.authorization.split(' ')[1], 'RESTFULAPIs', function(err, decode) {\n    \t\n\t    \tif (err) \n\t    \t\treq.user = undefined;\n\t      \n\t      \treq.user = decode;\n\t      \tnext();\n    \t});\n  \t\n  \t}else{\n    \treq.user = undefined;\n    \tnext();\n  \t}\n});\n\nadmin.configure(app);\nuser.configure(app);\nauth.configure(app);\nmember.configure(app);\nvideo.configure(app);\nvideoadmin.configure(app);\ngeneral.configure(app);\nchat.configure(app);\n\napp.use(express.static(publicDir));\n\napp.options('*', cors());\n\n\n\n\nmodule.exports = app;"]}