{"version":3,"sources":["../src/app/controllers/general.js"],"names":["connection","require","emailModel","empty","cGeneral","countryList","req","res","next","acquire","err","con","sql","query","data","release","status","json","statusCode","message","code","dt","i","length","push","country_id","country_code","country_name","success","languageList","language_id","language_code","language_name","appsVersion","version_code","build_version","is_maintenance","contactUs","console","log","body","email","name","sendEmailContactUs","module","exports"],"mappings":"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","file":"general.js","sourcesContent":["var connection = require('../../../config/db');\nvar emailModel = require('../models/email');\nvar empty = require('is-empty');\n \nfunction cGeneral() {\n  this.countryList = function(req,res,next) {\n    connection.acquire(function(err,con){\n      if (err) throw err;\n        var sql = 'SELECT * FROM countries';\n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n             \n\n          var dt = [];\n          for (var i = 0; i < data.length; i++) {\n              dt.push({\n                \"countryId\": data[i].country_id,\n                \"code\": data[i].country_code,\n                \"name\": data[i].country_name\n              });\n          } \n\n          return res.status(200).json({statusCode:200,success:true,data:dt});\n \n      });\n    });\n  };\n\n  this.languageList = function(req,res,next) {\n    connection.acquire(function(err,con){\n      if (err) throw err;\n        var sql = 'SELECT * FROM languages';\n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n             \n\n          var dt = [];\n          for (var i = 0; i < data.length; i++) {\n              dt.push({\n                \"languageId\": data[i].language_id,\n                \"code\": data[i].language_code,\n                \"name\": data[i].language_name\n              });\n          } \n\n          return res.status(200).json({statusCode:200,success:true,data:dt});\n \n      });\n    });\n  };\n\n  this.appsVersion = function(req,res,next) {\n    connection.acquire(function(err,con){\n      if (err) throw err;\n        var sql = 'SELECT * FROM apps_version LIMIT 1';\n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n\n          if(data.length < 1){\n            res.status(404).json({statusCode:404,message: \"Data not found\"});\n          }else{\n            var dt = [];\n\n            dt.push({\n              \"versionCode\": data[0].version_code,\n              \"buildVersion\": data[0].build_version,\n              \"isMaintenance\": (data[0].is_maintenance == 0) ? false : true\n            });\n\n            return res.status(200).json({statusCode:200,success:true,data:dt[0]});\n          }\n \n      });\n    });\n  };\n\n  this.contactUs = function(req,res,next) {\n    console.log(req.body);\n    if( empty(req.body.email) || empty(req.body.name) || empty(req.body.message) )\n      return res.status(500).json({statusCode:500,message: \"Please check your parameter or value required\"}); \n\n    emailModel.sendEmailContactUs(req.body.email,req.body.name,req.body.message)\n    return res.status(200).json({statusCode:200,success:true});\n  };\n\n  \n}\nmodule.exports = new cGeneral();"]}