{"version":3,"sources":["../src/app/controllers/general.js"],"names":["connection","require","cGeneral","countryList","req","res","next","acquire","err","con","sql","query","data","release","status","json","statusCode","message","code","dt","i","length","push","country_id","country_code","country_name","success","languageList","language_id","language_code","language_name","appsVersion","version_code","build_version","is_maintenance","module","exports"],"mappings":"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","file":"general.js","sourcesContent":["var connection = require('../../../config/db');\n \nfunction cGeneral() {\n  this.countryList = function(req,res,next) {\n    connection.acquire(function(err,con){\n      if (err) throw err;\n        var sql = 'SELECT * FROM countries';\n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n             \n\n          var dt = [];\n          for (var i = 0; i < data.length; i++) {\n              dt.push({\n                \"countryId\": data[i].country_id,\n                \"code\": data[i].country_code,\n                \"name\": data[i].country_name\n              });\n          } \n\n          return res.status(200).json({statusCode:200,success:true,data:dt});\n \n      });\n    });\n  };\n\n  this.languageList = function(req,res,next) {\n    connection.acquire(function(err,con){\n      if (err) throw err;\n        var sql = 'SELECT * FROM languages';\n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n             \n\n          var dt = [];\n          for (var i = 0; i < data.length; i++) {\n              dt.push({\n                \"languageId\": data[i].language_id,\n                \"code\": data[i].language_code,\n                \"name\": data[i].language_name\n              });\n          } \n\n          return res.status(200).json({statusCode:200,success:true,data:dt});\n \n      });\n    });\n  };\n\n  this.appsVersion = function(req,res,next) {\n    connection.acquire(function(err,con){\n      if (err) throw err;\n        var sql = 'SELECT * FROM apps_version LIMIT 1';\n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n\n          if(data.length < 1){\n            res.status(404).json({statusCode:404,message: \"Data not found\"});\n          }else{\n            var dt = [];\n\n            dt.push({\n              \"versionCode\": data[0].version_code,\n              \"buildVersion\": data[0].build_version,\n              \"isMaintenance\": (data[0].is_maintenance == 0) ? false : true\n            });\n\n            return res.status(200).json({statusCode:200,success:true,data:dt[0]});\n          }\n \n      });\n    });\n  };\n\n  \n}\nmodule.exports = new cGeneral();"]}