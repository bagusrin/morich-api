{"version":3,"sources":["../src/app/controllers/videoadmin.js"],"names":["connection","require","jwt","bcrypt","userModel","empty","cVideoAdmin","list","req","res","next","page","query","undefined","limit","type","email","show","by","offset","count","search","acquire","err","con","sql","console","log","data","release","status","json","statusCode","message","code","dt","i","length","push","video_id","video_youtube_id","video_youtube_link","video_youtube_iframe","video_youtube_image","video_title","video_desc","video_marketing","video_type","video_position","post_date","success","listSlider","listAdmin","created_by","detail","videoId","params","id","post","body","youtubeLink","title","desc","contentMarketing","youtubeId","split","youtubeIframe","youtubeImg","position","createdBy","insertId","update","publish","affectedRows","delete","vlist","vlistSlider","vlistAdmin","vdetail","vpost","vupdate","vpublish","vdelete","module","exports"],"mappings":"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","file":"videoadmin.js","sourcesContent":["var connection = require('../../../config/db');\n\nvar jwt = require('jsonwebtoken'),\n    bcrypt = require('bcrypt'),\n    userModel = require('../models/user'),\n    empty = require('is-empty');\n \nfunction cVideoAdmin() {\n \n  this.list = function(req,res,next) {\n\n    var page = (req.query.page == undefined) ? 1 : req.query.page;\n    var limit = (req.query.limit == undefined) ? 20 : req.query.limit;\n    var type = req.query.type;\n    var email = req.query.email;\n    var show = req.query.show;\n    var by = req.query.by;\n    \n  \n    var offset = (page - 1) * limit;\n    var count = \" LIMIT \"+offset+\",\"+limit;\n\n    var search = \"\";\n\n    if(!empty(type) && !empty(email)){\n      search += \" AND video_type = '\"+type+\"'\";\n      search += \" AND (created_by = '\"+email+\"' OR created_by = 'admin') \";\n      search += \" AND status = 1\";\n    }\n\n    if(!empty(type) && empty(email)){\n      search += \" AND video_type = '\"+type+\"'\";\n      search += \" AND created_by = 'admin'\";\n      search += \" AND status = 1\";\n    }\n\n    if(empty(type) && !empty(email)){\n      search += \" AND created_by = '\"+email+\"'\";\n      search += \" AND status = 1\";\n    }\n\n    if(!empty(show)){\n\n      if(show == \"all\"){\n        search += \" AND status <> 2\";\n        search += \" AND video_position = 0\";  \n      }\n      \n    }\n\n    if(!empty(by)){\n\n      if(by == \"admin\"){\n        search += \" AND status = 1\";\n        search += \" AND created_by = 'admin'\";  \n      }\n      \n    }\n\n    if(empty(type) && empty(email) && empty(show) && empty(by)){\n      search += \" AND status = 1\";\n      search += \" AND video_position = 0\";\n    } \n\n    connection.acquire(function(err,con){\n      if (err) throw err;\n\n        var sql = \"SELECT * from videos_admin WHERE 1 \"+search+\" ORDER BY video_id DESC \"+count\n\n        console.log(sql);\n        \n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n             \n\n          var dt = [];\n          for (var i = 0; i < data.length; i++) {\n              dt.push({\n                \"videoId\": data[i].video_id,\n                \"youtubeId\": data[i].video_youtube_id,\n                \"youtubeLink\": data[i].video_youtube_link,\n                \"youtubeIframe\": data[i].video_youtube_iframe,\n                \"youtubeImg\": data[i].video_youtube_image,\n                \"title\": data[i].video_title,\n                \"description\": data[i].video_desc,\n                \"contentMarketing\": data[i].video_marketing,\n                \"type\": data[i].video_type,\n                \"position\": data[i].video_position,\n                \"postDate\": data[i].post_date\n              });\n          }\n\n          return res.status(200).json({\n                                  statusCode:200,\n                                  success:true,\n                                  data:dt\n                              });\n \n      });\n    });\n  }\n\n  this.listSlider = function(req,res,next) {\n\n    var page = (req.query.page == undefined) ? 1 : req.query.page;\n    var limit = (req.query.limit == undefined) ? 3 : req.query.limit;\n    \n  \n    var offset = (page - 1) * limit;\n    var count = \" LIMIT \"+offset+\",\"+limit;\n\n    connection.acquire(function(err,con){\n      if (err) throw err;\n\n        var sql = \"SELECT * from videos_admin WHERE status = 1 AND video_position <> 0 ORDER BY video_position ASC \"+count\n        \n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n             \n\n          var dt = [];\n          for (var i = 0; i < data.length; i++) {\n              dt.push({\n                \"videoId\": data[i].video_id,\n                \"youtubeId\": data[i].video_youtube_id,\n                \"youtubeLink\": data[i].video_youtube_link,\n                \"youtubeIframe\": data[i].video_youtube_iframe,\n                \"youtubeImg\": data[i].video_youtube_image,\n                \"title\": data[i].video_title,\n                \"description\": data[i].video_desc,\n                \"contentMarketing\": data[i].video_marketing,\n                \"type\": data[i].video_type,\n                \"position\": data[i].video_position,\n                \"postDate\": data[i].post_date\n              });\n          }\n\n          return res.status(200).json({\n                                  statusCode:200,\n                                  success:true,\n                                  data:dt\n                              });\n \n      });\n    });\n  }\n\n  this.listAdmin = function(req,res,next) {\n\n    var page = (req.query.page == undefined) ? 1 : req.query.page;\n    var limit = (req.query.limit == undefined) ? 20 : req.query.limit;\n    var type = req.query.type;\n    \n  \n    var offset = (page - 1) * limit;\n    var count = \" LIMIT \"+offset+\",\"+limit;\n\n    var search = \"\";\n\n    if(!empty(type)){\n      search += \" AND video_type = '\"+type+\"'\";\n    }\n\n    connection.acquire(function(err,con){\n      if (err) throw err;\n\n        var sql = \"SELECT * from videos_admin WHERE status <> 2 \"+search+\" ORDER BY video_id DESC \"+count\n        \n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n             \n\n          var dt = [];\n          for (var i = 0; i < data.length; i++) {\n              dt.push({\n                \"videoId\": data[i].video_id,\n                \"youtubeId\": data[i].video_youtube_id,\n                \"youtubeLink\": data[i].video_youtube_link,\n                \"youtubeIframe\": data[i].video_youtube_iframe,\n                \"youtubeImg\": data[i].video_youtube_image,\n                \"title\": data[i].video_title,\n                \"description\": data[i].video_desc,\n                \"contentMarketing\": data[i].video_marketing,\n                \"type\": data[i].video_type,\n                \"position\": data[i].video_position,\n                \"createdBy\": data[i].created_by,\n                \"status\": data[i].status,\n                \"postDate\": data[i].post_date\n              });\n          }\n\n          return res.status(200).json({\n                                  statusCode:200,\n                                  success:true,\n                                  data:dt\n                              });\n \n      });\n    });\n  }\n\n  this.detail = function(req,res,next) {\n\n      var videoId = req.params.id;\n    \n      connection.acquire(function(err,con){\n        if (err) throw err;\n\n          var sql = \"SELECT * from videos_admin WHERE video_id = '\"+videoId+\"' LIMIT 1\";\n          \n          con.query(sql, function(err,data){\n            con.release();\n            if(err)\n                return res.status(500).json({statusCode:500,message: err.code});\n\n            if(data.length < 1){\n              res.status(404).json({statusCode:404,message: \"Data not found\"});\n            }else{\n              var dt = [];\n              dt.push({\n                \"videoId\": data[0].video_id,\n                \"youtubeId\": data[0].video_youtube_id,\n                \"youtubeLink\": data[0].video_youtube_link,\n                \"youtubeIframe\": data[0].video_youtube_iframe,\n                \"youtubeImg\": data[0].video_youtube_image,\n                \"title\": data[0].video_title,\n                \"description\": data[0].video_desc,\n                \"contentMarketing\": data[0].video_marketing,\n                \"type\": data[0].video_type,\n                \"position\": data[0].video_position,\n                \"postDate\": data[0].post_date\n              });\n\n              return res.status(200).json({\n                                      statusCode:200,\n                                      success:true,\n                                      data:dt[0]\n                                  });\n            }\n        });\n      });\n  };\n\n  this.post = function(req,res,next) {\n\n    try {\n\n      if( empty(req.body.youtubeLink) || empty(req.body.title) )\n        return res.status(500).json({statusCode:500,message: \"Please check your parameter or value required\"}); \n\n      var youtubeLink = req.body.youtubeLink;\n      var title = req.body.title;\n      var desc = req.body.desc;\n      var contentMarketing = (!empty(req.body.contentMarketing)) ? req.body.contentMarketing : '';\n      var youtubeId = youtubeLink.split(\"youtu.be/\")[1];\n      var youtubeIframe = \"https://youtube.com/embed/\"+youtubeId;\n      var youtubeImg = \"https://i.ytimg.com/vi/\"+youtubeId+\"/hqdefault.jpg\";\n      var type = req.body.type;\n      var position = (req.body.position == undefined) ? 0 : req.body.position;\n      var createdBy = (!empty(req.body.email)) ? req.body.email : \"admin\";\n      var status = (!empty(req.body.email)) ? 0 : 1;\n\n      connection.acquire(function(err,con){\n        if (err) throw err;\n\n          var sql = \"INSERT INTO videos_admin (video_youtube_id, video_youtube_link, video_youtube_iframe \\\n          ,video_youtube_image,video_title,video_desc,video_marketing,video_type,video_position,created_by,status,post_date) \\\n          VALUES ('\"+youtubeId+\"','\"+youtubeLink+\"','\"+youtubeIframe+\"','\"+youtubeImg+\"','\"+title+\"', '\"+desc+\"','\"+contentMarketing+\"','\"+type+\"','\"+position+\"','\"+createdBy+\"', '\"+status+\"', NOW())\";\n\n          console.log(sql);\n\n          con.query(sql, function(err,data){\n            con.release();\n            if(err)\n                return res.status(500).json({statusCode:500,message: err.code});\n               \n\n            return res.status(200).json({\n                                    statusCode:200,\n                                    success:true,\n                                    data:{\"videoId\":data.insertId}\n                                });\n   \n        });\n      });\n    } catch (err){\n      return res.status(500).json({statusCode:500,message: \"Please check your parameter or value required\"});\n    }\n    \n     \n  };\n\n  this.update = function(req,res,next) {\n    try {\n\n      if( empty(req.body.youtubeLink) || empty(req.body.title) || empty(req.body.videoId) )\n        return res.status(500).json({statusCode:500,message: \"Please check your parameter or value required\"}); \n      \n      var videoId = req.body.videoId;\n      var youtubeLink = req.body.youtubeLink;\n      var title = req.body.title;\n      var desc = req.body.desc;\n      var contentMarketing = (!empty(req.body.contentMarketing)) ? req.body.contentMarketing : '';\n      var youtubeId = youtubeLink.split(\"youtu.be/\")[1];\n      var youtubeIframe = \"https://youtube.com/embed/\"+youtubeId;\n      var youtubeImg = \"https://i.ytimg.com/vi/\"+youtubeId+\"/hqdefault.jpg\";\n      var type = req.body.type;\n      var position = (req.body.position == undefined) ? 0 : req.body.position;\n\n      connection.acquire(function(err,con){\n        if (err) throw err;\n\n        var sql = \"UPDATE videos_admin SET video_youtube_id = '\"+youtubeId+\"' \\\n        ,video_youtube_link = '\"+youtubeLink+\"' \\\n        ,video_youtube_iframe = '\"+youtubeIframe+\"',video_youtube_image = '\"+youtubeImg+\"', video_title = '\"+title+\"', video_desc = '\"+desc+\"' \\\n        ,video_marketing = '\"+contentMarketing+\"',video_type = '\"+type+\"',video_position = '\"+position+\"',update_date = NOW() WHERE video_id = '\"+videoId+\"'\";\n\n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n             \n\n          return res.status(200).json({\n                                  statusCode:200,\n                                  success:true,\n                                  data:{\"videoId\":videoId}\n                              });\n   \n        });\n      });\n    } catch (err){\n      return res.status(500).json({statusCode:500,message: \"Please check your parameter or value required\"});\n    }\n    \n  };\n\n  this.publish = function(req,res,next) {\n    var videoId = req.body.videoId;\n\n    connection.acquire(function(err,con){\n      if (err) throw err;\n\n      var sql = \"UPDATE videos_admin SET status = 1 \\\n      ,update_date = NOW() WHERE video_id = '\"+videoId+\"'\";\n\n      //console.log(sql);\n\n        \n\n      con.query(sql, function(err,data){\n        con.release();\n        if(err)\n            return res.status(500).json({statusCode:500,message: err.code});\n\n        if(data.affectedRows == 0)\n          return res.status(500).json({statusCode:500,message: \"Failed to publish video. Check your parameter.\"}); \n\n        return res.status(200).json({\n                                statusCode:200,\n                                success:true\n                            });\n \n      });\n    });\n  };\n\n  this.delete = function(req,res,next) {\n    var videoId = req.body.videoId;\n\n    connection.acquire(function(err,con){\n      if (err) throw err;\n\n      var sql = \"UPDATE videos_admin SET status = 2 \\\n      ,update_date = NOW() WHERE video_id = '\"+videoId+\"'\";\n\n      //console.log(sql);\n\n        \n\n      con.query(sql, function(err,data){\n        con.release();\n        if(err)\n            return res.status(500).json({statusCode:500,message: err.code});\n\n        if(data.affectedRows == 0)\n          return res.status(500).json({statusCode:500,message: \"Failed to delete data. Check your parameter.\"}); \n\n        return res.status(200).json({\n                                statusCode:200,\n                                success:true\n                            });\n \n      });\n    });\n  };\n\n  //========================================================================//\n\n  this.vlist = function(req,res,next) {\n\n    var page = (req.query.page == undefined) ? 1 : req.query.page;\n    var limit = (req.query.limit == undefined) ? 20 : req.query.limit;\n    var type = req.query.type;\n    var email = req.query.email;\n    \n  \n    var offset = (page - 1) * limit;\n    var count = \" LIMIT \"+offset+\",\"+limit;\n\n    var search = \"\";\n\n    if(!empty(type)){\n      search += \" AND video_type = '\"+type+\"'\";\n    }\n\n    if(!empty(email)){\n      search += \" AND created_by = '\"+email+\"'\";\n    }\n\n    connection.acquire(function(err,con){\n      if (err) throw err;\n\n        var sql = \"SELECT * from videos_learning WHERE status = 1 \"+search+\" ORDER BY video_id DESC \"+count\n        \n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n             \n\n          var dt = [];\n          for (var i = 0; i < data.length; i++) {\n              dt.push({\n                \"videoId\": data[i].video_id,\n                \"youtubeId\": data[i].video_youtube_id,\n                \"youtubeLink\": data[i].video_youtube_link,\n                \"youtubeIframe\": data[i].video_youtube_iframe,\n                \"youtubeImg\": data[i].video_youtube_image,\n                \"title\": data[i].video_title,\n                \"description\": data[i].video_desc,\n                //\"contentMarketing\": data[i].video_marketing,\n                \"type\": data[i].video_type,\n                //\"position\": data[i].video_position,\n                \"postDate\": data[i].post_date\n              });\n          }\n\n          return res.status(200).json({\n                                  statusCode:200,\n                                  success:true,\n                                  data:dt\n                              });\n \n      });\n    });\n  }\n\n  this.vlistSlider = function(req,res,next) {\n\n    var page = (req.query.page == undefined) ? 1 : req.query.page;\n    var limit = (req.query.limit == undefined) ? 3 : req.query.limit;\n    \n  \n    var offset = (page - 1) * limit;\n    var count = \" LIMIT \"+offset+\",\"+limit;\n\n    connection.acquire(function(err,con){\n      if (err) throw err;\n\n        var sql = \"SELECT * from videos_learning WHERE status = 1 AND video_position <> 0 ORDER BY video_position ASC \"+count\n        \n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n             \n\n          var dt = [];\n          for (var i = 0; i < data.length; i++) {\n              dt.push({\n                \"videoId\": data[i].video_id,\n                \"youtubeId\": data[i].video_youtube_id,\n                \"youtubeLink\": data[i].video_youtube_link,\n                \"youtubeIframe\": data[i].video_youtube_iframe,\n                \"youtubeImg\": data[i].video_youtube_image,\n                \"title\": data[i].video_title,\n                \"description\": data[i].video_desc,\n                \"contentMarketing\": data[i].video_marketing,\n                \"type\": data[i].video_type,\n                \"position\": data[i].video_position,\n                \"postDate\": data[i].post_date\n              });\n          }\n\n          return res.status(200).json({\n                                  statusCode:200,\n                                  success:true,\n                                  data:dt\n                              });\n \n      });\n    });\n  }\n\n  this.vlistAdmin = function(req,res,next) {\n\n    var page = (req.query.page == undefined) ? 1 : req.query.page;\n    var limit = (req.query.limit == undefined) ? 20 : req.query.limit;\n    var type = req.query.type;\n    \n  \n    var offset = (page - 1) * limit;\n    var count = \" LIMIT \"+offset+\",\"+limit;\n\n    var search = \"\";\n\n    if(!empty(type)){\n      search += \" AND video_type = '\"+type+\"'\";\n    }\n\n    connection.acquire(function(err,con){\n      if (err) throw err;\n\n        var sql = \"SELECT * from videos_learning WHERE status <> 2 \"+search+\" ORDER BY video_id DESC \"+count\n        \n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n             \n\n          var dt = [];\n          for (var i = 0; i < data.length; i++) {\n              dt.push({\n                \"videoId\": data[i].video_id,\n                \"youtubeId\": data[i].video_youtube_id,\n                \"youtubeLink\": data[i].video_youtube_link,\n                \"youtubeIframe\": data[i].video_youtube_iframe,\n                \"youtubeImg\": data[i].video_youtube_image,\n                \"title\": data[i].video_title,\n                \"description\": data[i].video_desc,\n                \"contentMarketing\": data[i].video_marketing,\n                \"type\": data[i].video_type,\n                \"position\": data[i].video_position,\n                \"createdBy\": data[i].created_by,\n                \"status\": data[i].status,\n                \"postDate\": data[i].post_date\n              });\n          }\n\n          return res.status(200).json({\n                                  statusCode:200,\n                                  success:true,\n                                  data:dt\n                              });\n \n      });\n    });\n  }\n\n  this.vdetail = function(req,res,next) {\n\n      var videoId = req.params.id;\n    \n      connection.acquire(function(err,con){\n        if (err) throw err;\n\n          var sql = \"SELECT * from videos_learning WHERE video_id = '\"+videoId+\"' LIMIT 1\";\n          \n          con.query(sql, function(err,data){\n            con.release();\n            if(err)\n                return res.status(500).json({statusCode:500,message: err.code});\n\n            if(data.length < 1){\n              res.status(404).json({statusCode:404,message: \"Data not found\"});\n            }else{\n              var dt = [];\n              dt.push({\n                \"videoId\": data[0].video_id,\n                \"youtubeId\": data[0].video_youtube_id,\n                \"youtubeLink\": data[0].video_youtube_link,\n                \"youtubeIframe\": data[0].video_youtube_iframe,\n                \"youtubeImg\": data[0].video_youtube_image,\n                \"title\": data[0].video_title,\n                \"description\": data[0].video_desc,\n                //\"contentMarketing\": data[0].video_marketing,\n                \"type\": data[0].video_type,\n                //\"position\": data[0].video_position,\n                \"postDate\": data[0].post_date\n              });\n\n              return res.status(200).json({\n                                      statusCode:200,\n                                      success:true,\n                                      data:dt[0]\n                                  });\n            }\n        });\n      });\n  };\n\n  this.vpost = function(req,res,next) {\n\n    try {\n\n      if( empty(req.body.youtubeLink) || empty(req.body.title) )\n        return res.status(500).json({statusCode:500,message: \"Please check your parameter or value required\"});\n\n      var youtubeLink = req.body.youtubeLink;\n      var title = req.body.title;\n      var desc = req.body.desc;\n      var contentMarketing = '';\n      var youtubeId = youtubeLink.split(\"youtu.be/\")[1];\n      var youtubeIframe = \"https://youtube.com/embed/\"+youtubeId;\n      var youtubeImg = \"https://i.ytimg.com/vi/\"+youtubeId+\"/hqdefault.jpg\";\n      var type = req.body.type;\n      var position = 0;\n      var createdBy = (!empty(req.body.email)) ? req.body.email : \"admin\";\n      var status = (!empty(req.body.email)) ? 0 : 1;\n\n      connection.acquire(function(err,con){\n        if (err) throw err;\n\n          var sql = \"INSERT INTO videos_learning (video_youtube_id, video_youtube_link, video_youtube_iframe \\\n          ,video_youtube_image,video_title,video_desc,video_marketing,video_type,video_position,created_by,status,post_date) \\\n          VALUES ('\"+youtubeId+\"','\"+youtubeLink+\"','\"+youtubeIframe+\"','\"+youtubeImg+\"','\"+title+\"', '\"+desc+\"','\"+contentMarketing+\"','\"+type+\"','\"+position+\"','\"+createdBy+\"', '\"+status+\"', NOW())\";\n\n          console.log(sql);\n\n          con.query(sql, function(err,data){\n            con.release();\n            if(err)\n                return res.status(500).json({statusCode:500,message: err.code});\n               \n\n            return res.status(200).json({\n                                    statusCode:200,\n                                    success:true,\n                                    data:{\"videoId\":data.insertId}\n                                });\n   \n        });\n      });\n    } catch (err){\n      return res.status(500).json({statusCode:500,message: \"Please check your parameter or value required\"});\n    }\n    \n     \n  };\n\n  this.vupdate = function(req,res,next) {\n    try {\n\n      if( empty(req.body.youtubeLink) || empty(req.body.title) || empty(req.body.videoId) )\n        return res.status(500).json({statusCode:500,message: \"Please check your parameter or value required\"});\n\n      var videoId = req.body.videoId;\n      var youtubeLink = req.body.youtubeLink;\n      var title = req.body.title;\n      var desc = req.body.desc;\n      var contentMarketing = (!empty(req.body.contentMarketing)) ? req.body.contentMarketing : '';\n      var youtubeId = youtubeLink.split(\"youtu.be/\")[1];\n      var youtubeIframe = \"https://youtube.com/embed/\"+youtubeId;\n      var youtubeImg = \"https://i.ytimg.com/vi/\"+youtubeId+\"/hqdefault.jpg\";\n      var type = req.body.type;\n      var position = 0;\n\n      connection.acquire(function(err,con){\n        if (err) throw err;\n\n        var sql = \"UPDATE videos_learning SET video_youtube_id = '\"+youtubeId+\"' \\\n        ,video_youtube_link = '\"+youtubeLink+\"' \\\n        ,video_youtube_iframe = '\"+youtubeIframe+\"',video_youtube_image = '\"+youtubeImg+\"', video_title = '\"+title+\"', video_desc = '\"+desc+\"' \\\n        ,video_marketing = '\"+contentMarketing+\"',video_type = '\"+type+\"',video_position = '\"+position+\"',update_date = NOW() WHERE video_id = '\"+videoId+\"'\";\n\n        con.query(sql, function(err,data){\n          con.release();\n          if(err)\n              return res.status(500).json({statusCode:500,message: err.code});\n             \n\n          return res.status(200).json({\n                                  statusCode:200,\n                                  success:true,\n                                  data:{\"videoId\":videoId}\n                              });\n   \n        });\n      });\n    } catch (err){\n      return res.status(500).json({statusCode:500,message: \"Please check your parameter or value required\"});\n    }\n    \n  };\n\n  this.vpublish = function(req,res,next) {\n    var videoId = req.body.videoId;\n\n    connection.acquire(function(err,con){\n      if (err) throw err;\n\n      var sql = \"UPDATE videos_learning SET status = 1 \\\n      ,update_date = NOW() WHERE video_id = '\"+videoId+\"'\";\n\n      //console.log(sql);\n\n        \n\n      con.query(sql, function(err,data){\n        con.release();\n        if(err)\n            return res.status(500).json({statusCode:500,message: err.code});\n\n        if(data.affectedRows == 0)\n          return res.status(500).json({statusCode:500,message: \"Failed to publish video. Check your parameter.\"}); \n\n        return res.status(200).json({\n                                statusCode:200,\n                                success:true\n                            });\n \n      });\n    });\n  };\n\n  this.vdelete = function(req,res,next) {\n    var videoId = req.body.videoId;\n\n    connection.acquire(function(err,con){\n      if (err) throw err;\n\n      var sql = \"UPDATE videos_learning SET status = 2 \\\n      ,update_date = NOW() WHERE video_id = '\"+videoId+\"'\";\n\n      //console.log(sql);\n\n        \n\n      con.query(sql, function(err,data){\n        con.release();\n        if(err)\n            return res.status(500).json({statusCode:500,message: err.code});\n\n        if(data.affectedRows == 0)\n          return res.status(500).json({statusCode:500,message: \"Failed to delete data. Check your parameter.\"}); \n\n        return res.status(200).json({\n                                statusCode:200,\n                                success:true\n                            });\n \n      });\n    });\n  };\n\n}\nmodule.exports = new cVideoAdmin();"]}